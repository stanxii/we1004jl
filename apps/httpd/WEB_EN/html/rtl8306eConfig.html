<html>
    <head>
        <meta http-equiv='Content-Type' content='text/html;charset=utf-8;no-cache'>
        <title>EoC</title>
        <base target='_self'>
        <link rel="stylesheet" href="css/redmond/jquery-ui-1.10.3.custom.min.css"/>
        <link rel="stylesheet" href="css/redmond/demos.css"/>
        <link rel=stylesheet href='stylemain.css' type='text/css'>
        <link rel=stylesheet href='colors.css' type='text/css'>
        <script src="js/jquery-1.9.1.js"></script>
        <script src="js/jquery-ui-1.10.3.custom.min.js"></script>
        <script language="javascript" src="util.js"></script>
        <SCRIPT language=JavaScript> 
		var cnuId				= '<%ejGet(cnuid)%>';
		var swVlanEnable		= '<%ejGet(swVlanEnable)%>';
		var swCablePortVMode	= '<%ejGet(swUplinkPortVMode)%>';
		var swCablePortVid		= '<%ejGet(swUplinkPortVid)%>';
		var swEth1PortVMode		= '<%ejGet(swEth1PortVMode)%>';
		var swEth1PortVid		= '<%ejGet(swEth1PortVid)%>';
		var swEth2PortVMode		= '<%ejGet(swEth2PortVMode)%>';
		var swEth2PortVid		= '<%ejGet(swEth2PortVid)%>';
		var swEth3PortVMode		= '<%ejGet(swEth3PortVMode)%>';
		var swEth3PortVid		= '<%ejGet(swEth3PortVid)%>';
		var swEth4PortVMode		= '<%ejGet(swEth4PortVMode)%>';
		var swEth4PortVid		= '<%ejGet(swEth4PortVid)%>';
		var swRxRateLimitEnable	= '<%ejGet(swRxRateLimitEnable)%>';
		var swTxRateLimitEnable	= '<%ejGet(swTxRateLimitEnable)%>';
		var swUplinkRxRate		= '<%ejGet(swUplinkRxRate)%>';
		var swEth1RxRate		= '<%ejGet(swEth1RxRate)%>';
		var swEth2RxRate		= '<%ejGet(swEth2RxRate)%>';
		var swEth3RxRate		= '<%ejGet(swEth3RxRate)%>';
		var swEth4RxRate		= '<%ejGet(swEth4RxRate)%>';
		var swUplinkTxRate		= '<%ejGet(swUplinkTxRate)%>';
		var swEth1TxRate		= '<%ejGet(swEth1TxRate)%>';
		var swEth2TxRate		= '<%ejGet(swEth2TxRate)%>';
		var swEth3TxRate		= '<%ejGet(swEth3TxRate)%>';
		var swEth4TxRate		= '<%ejGet(swEth4TxRate)%>';		
		var swLoopDetect		= '<%ejGet(swLoopDetect)%>';
		var swEth1LoopStatus	= '<%ejGet(swEth1LoopStatus)%>';
		var swEth2LoopStatus	= '<%ejGet(swEth2LoopStatus)%>';
		var swEth3LoopStatus	= '<%ejGet(swEth3LoopStatus)%>';
		var swEth4LoopStatus	= '<%ejGet(swEth4LoopStatus)%>';
      				
		$(function()
		{
		    $( "#accordion" ).accordion({
		        collapsible: true,
		        heightStyle: "content" 
		    });
		});
				
		function frmLoad() {
			with ( document.forms[0] )
			{
				vlanStatus.selectedIndex = swVlanEnable;
				/* vlan mode: 0-transparent, 1-untag, 2-tag */
				eth1vmode.selectedIndex = swEth1PortVMode;
				/* vlan id from 1 to 4096 */
				eth1vid.value = swEth1PortVid;
				eth2vmode.selectedIndex = swEth2PortVMode;
				eth2vid.value = swEth2PortVid;
				eth3vmode.selectedIndex = swEth3PortVMode;
				eth3vid.value = swEth3PortVid;
				eth4vmode.selectedIndex = swEth4PortVMode;
				eth4vid.value = swEth4PortVid;
				cpuvmode.selectedIndex = swCablePortVMode;
				cpuvid.value = swCablePortVid;
				//bandwidth control
				rxBctrlStatus.selectedIndex = swRxRateLimitEnable;
				txBctrlStatus.selectedIndex = swTxRateLimitEnable;
				eth1rxvalue.value = swEth1RxRate;
				eth2rxvalue.value = swEth2RxRate;
				eth3rxvalue.value = swEth3RxRate;
				eth4rxvalue.value = swEth4RxRate;
				cablerxvalue.value = swUplinkRxRate;
				eth1txvalue.value = swEth1TxRate;
				eth2txvalue.value = swEth2TxRate;
				eth3txvalue.value = swEth3TxRate;
				eth4txvalue.value = swEth4TxRate;
				cabletxvalue.value = swUplinkTxRate;
				//loop detect
				loopDetectStatus.selectedIndex = swLoopDetect;
				eth1LoopStatus.selectedIndex = swEth1LoopStatus;
				eth2LoopStatus.selectedIndex = swEth2LoopStatus;
				eth3LoopStatus.selectedIndex = swEth3LoopStatus;
				eth4LoopStatus.selectedIndex = swEth4LoopStatus;
			}
		}

		function Return() {
			var loc = 'previewCnus.cgi';	
			var code = 'location="' + loc + '"';
			//alert(code);
			eval(code);
		}

		function Read() {
			with ( document.forms[0] ) 
			{
				btn_read.disabled = "disabled";
				btn_write.disabled = "disabled";
				btn_return.disabled = "disabled";
			}
			var loc = 'rtl8306eConfigRead.cgi?';	
			loc += 'cnuid=' + cnuId;
			var code = 'location="' + loc + '"';
			//alert(code);
			eval(code);
		}

		function Write() {
			var loc = 'rtl8306eConfigWrite.cgi?';
			with ( document.forms[0] ) 
			{
				if(vlanStatus.selectedIndex)
				{
					if( isValidVlanId(cpuvid.value) == false )
			   		{
			   			return;	
			   		}
					if( isValidVlanId(eth1vid.value) == false )
			   		{
			   			return;	
			   		}
					if( isValidVlanId(eth2vid.value) == false )
			   		{
			   			return;	
			   		}
					if( isValidVlanId(eth3vid.value) == false )
			   		{
			   			return;	
			   		}
					if( isValidVlanId(eth4vid.value) == false )
			   		{
			   			return;	
			   		}
				}
				
				if(rxBctrlStatus.selectedIndex)
				{
					if( isValidBctrlValue(eth1rxvalue.value) == false )
			   		{
			   			return;	
			   		}
					if( isValidBctrlValue(eth2rxvalue.value) == false )
			   		{
			   			return;	
			   		}
					if( isValidBctrlValue(eth3rxvalue.value) == false )
			   		{
			   			return;	
			   		}
					if( isValidBctrlValue(eth4rxvalue.value) == false )
			   		{
			   			return;	
			   		}
					if( isValidBctrlValue(cablerxvalue.value) == false )
			   		{
			   			return;	
			   		}
				}
				
				if(txBctrlStatus.selectedIndex)
				{
					if( isValidBctrlValue(eth1txvalue.value) == false )
			   		{
			   			return;	
			   		}
					if( isValidBctrlValue(eth2txvalue.value) == false )
			   		{
			   			return;	
			   		}
					if( isValidBctrlValue(eth3txvalue.value) == false )
			   		{
			   			return;	
			   		}
					if( isValidBctrlValue(eth4txvalue.value) == false )
			   		{
			   			return;	
			   		}
					if( isValidBctrlValue(cabletxvalue.value) == false )
			   		{
			   			return;	
			   		}
				}
								
				loc += 'cnuid=' + cnuId;
				loc += '&swVlanEnable=' + vlanStatus.selectedIndex;

				if(vlanStatus.selectedIndex)
				{
					loc += '&swUplinkPortVMode=' + cpuvmode.selectedIndex;
					loc += '&swEth1PortVMode=' + eth1vmode.selectedIndex;
					loc += '&swEth2PortVMode=' + eth2vmode.selectedIndex;
					loc += '&swEth3PortVMode=' + eth3vmode.selectedIndex;
					loc += '&swEth4PortVMode=' + eth4vmode.selectedIndex;

					loc += '&swUplinkPortVid=' + cpuvid.value;
					loc += '&swEth1PortVid=' + eth1vid.value;
					loc += '&swEth2PortVid=' + eth2vid.value;
					loc += '&swEth3PortVid=' + eth3vid.value;
					loc += '&swEth4PortVid=' + eth4vid.value;
				}
				else
				{
					loc += '&swUplinkPortVMode=' + 0;
					loc += '&swEth1PortVMode=' + 0;
					loc += '&swEth2PortVMode=' + 0;
					loc += '&swEth3PortVMode=' + 0;
					loc += '&swEth4PortVMode=' + 0;

					loc += '&swUplinkPortVid=' + 1;
					loc += '&swEth1PortVid=' + 1;
					loc += '&swEth2PortVid=' + 1;
					loc += '&swEth3PortVid=' + 1;
					loc += '&swEth4PortVid=' + 1;
				}
				

				loc += '&swRxRateLimitEnable=' + rxBctrlStatus.selectedIndex;
				loc += '&swTxRateLimitEnable=' + txBctrlStatus.selectedIndex;

				if(rxBctrlStatus.selectedIndex)
				{
					loc += '&swUplinkRxRate=' + cablerxvalue.value;
					loc += '&swEth1RxRate=' + eth1rxvalue.value;
					loc += '&swEth2RxRate=' + eth2rxvalue.value;
					loc += '&swEth3RxRate=' + eth3rxvalue.value;
					loc += '&swEth4RxRate=' + eth4rxvalue.value;
				}
				else
				{
					loc += '&swUplinkRxRate=' + 0;
					loc += '&swEth1RxRate=' + 0;
					loc += '&swEth2RxRate=' + 0;
					loc += '&swEth3RxRate=' + 0;
					loc += '&swEth4RxRate=' + 0;
				}
				
				if(txBctrlStatus.selectedIndex)
				{
					loc += '&swUplinkTxRate=' + cabletxvalue.value;
					loc += '&swEth1TxRate=' + eth1txvalue.value;
					loc += '&swEth2TxRate=' + eth2txvalue.value;
					loc += '&swEth3TxRate=' + eth3txvalue.value;
					loc += '&swEth4TxRate=' + eth4txvalue.value;
				}
				else
				{
					loc += '&swUplinkTxRate=' + 0;
					loc += '&swEth1TxRate=' + 0;
					loc += '&swEth2TxRate=' + 0;
					loc += '&swEth3TxRate=' + 0;
					loc += '&swEth4TxRate=' + 0;
				}				

				loc += '&swLoopDetect=' + loopDetectStatus.selectedIndex;
				
				btn_write.disabled = "disabled";
				btn_read.disabled = "disabled";
				btn_return.disabled = "disabled";
			}
			
			var code = 'location="' + loc + '"';
			//alert(code);
			eval(code);
		}
	  </SCRIPT>
      </head>
      <body onLoad='frmLoad()'>
      <blockquote>
         <form>
            <br>
            <table border="0" cellpadding="5" cellspacing="0">
              <tr>
         	  <td class='maintitle'><b>Swich Settings</b></td>            		
         	</tr>                       
         	</table>
         	<table border="0" cellpadding="0" cellspacing="0">            	
         	  <tr>
         	    <td class='mainline' width=800></td>
         	  </tr>                           
         	</table>
              <br>Through this page, you can view and configure the switch port settings.</br>
	       1. Click 'Read' button to get the current settings from the device</br>
	       2. Click 'Write' button to save the the configuration to the device</br>
            <br>
<div id="accordion">  
  <h3>802.1Q VLAN Settings</h3>
  <div>
    <table border=0 cellpadding=0 cellspacing=0>
            	<tr>
            		<td class='diagdata'>802.1q Vlan Status</td>
            		<td class='diagdata' colspan=2>
            			<select name='vlanStatus' size=1>
            				<option value='0'>Disable</option>
            				<option value='1'>Enable</option>
            			</select>
            		</td>
            	</tr>
            	<tr>
            		<td class='diagdata' width=150>Port</td>
            		<td class='diagdata' width=150>Tag Mode</td>
            		<td class='diagdata' width=300>Vlan ID</td>
            	</tr>
            	
            	<tr>
            		<td class='diagdata'>CPU Port</td>
            		<td class='diagdata'>
            			<select name='cpuvmode' size=1>
            				<option value='0'>Transparent</option>
            				<option value='1'>Untag</option>
            				<option value='2'>Tag</option>
            			</select>
            		</td>
            		<td class='diagdata'><input type='text' name='cpuvid' size='8'>[Range of 1~4094]</td>
            	</tr>

            	<tr>
            		<td class='diagdata'>ETH1</td>
            		<td class='diagdata'>
            			<select name='eth1vmode' size=1>
            				<option value='0'>Transparent</option>
            				<option value='1'>Untag</option>
            				<option value='2'>Tag</option>
            			</select>
            		</td>
            		<td class='diagdata'><input type='text' name='eth1vid' size='8'>[Range of 1~4094]</td>
            	</tr>

            	<tr>
            		<td class='diagdata'>ETH2</td>
            		<td class='diagdata'>
            			<select name='eth2vmode' size=1>
            				<option value='0'>Transparent</option>
            				<option value='1'>Untag</option>
            				<option value='2'>Tag</option>
            			</select>
            		</td>
            		<td class='diagdata'><input type='text' name='eth2vid' size='8'>[Range of 1~4094]</td>
            	</tr>

            	<tr>
            		<td class='diagdata'>ETH3</td>
            		<td class='diagdata'>
            			<select name='eth3vmode' size=1>
            				<option value='0'>Transparent</option>
            				<option value='1'>Untag</option>
            				<option value='2'>Tag</option>
            			</select>
            		</td>
            		<td class='diagdata'><input type='text' name='eth3vid' size='8'>[Range of 1~4094]</td>
            	</tr>

            	<tr>
            		<td class='diagdata'>ETH4</td>
            		<td class='diagdata'>
            			<select name='eth4vmode' size=1>
            				<option value='0'>Transparent</option>
            				<option value='1'>Untag</option>
            				<option value='2'>Tag</option>
            			</select>
            		</td>
            		<td class='diagdata'><input type='text' name='eth4vid' size='8'>[Range of 1~4094]</td>
            	</tr> 
        </table>
  </div>
  <h3>Port Bandwidth Control Settings</h3>
  <div>
  	<table border=0 cellpadding=0 cellspacing=0>  
            	<tr>
            		<td class='diagdata' width=300>Port RX Bandwidth Control Status</td>
            		<td class='diagdata' width=300>
            			<select name='rxBctrlStatus' size=1>
            				<option value='0'>Disable</option>
            				<option value='1'>Enable</option>
            			</select>
            		</td>
            	</tr>
            	<tr>
            		<td class='diagdata'>ETH1 Port RX Bandwidth Value</td>
            		<td class='diagdata'><input type='text' name='eth1rxvalue' size='10'>*64Kbits/s [Range of 0~1526]</td>
            	</tr>
            	<tr>
            		<td class='diagdata'>ETH2 Port RX Bandwidth Value</td>
            		<td class='diagdata'><input type='text' name='eth2rxvalue' size='10'>*64Kbits/s [Range of 0~1526]</td>
            	</tr>
            	<tr>
            		<td class='diagdata'>ETH3 Port RX Bandwidth Value</td>
            		<td class='diagdata'><input type='text' name='eth3rxvalue' size='10'>*64Kbits/s [Range of 0~1526]</td>
            	</tr>
            	<tr>
            		<td class='diagdata'>ETH4 Port RX Bandwidth Value</td>
            		<td class='diagdata'><input type='text' name='eth4rxvalue' size='10'>*64Kbits/s [Range of 0~1526]</td>
            	</tr>
            	<tr>
            		<td class='diagdata'>Cable Port RX Bandwidth Value</td>
            		<td class='diagdata'><input type='text' name='cablerxvalue' size='10'>*64Kbits/s [Range of 0~1526]</td>
            	</tr>

            	<tr>
            		<td class='diagdata'>Port TX Bandwidth Control Status</td>
            		<td class='diagdata'>
            			<select name='txBctrlStatus' size=1>
            				<option value='0'>Disable</option>
            				<option value='1'>Enable</option>
            			</select>
            		</td>
            	</tr>
            	<tr>
            		<td class='diagdata'>ETH1 Port TX Bandwidth Value</td>
            		<td class='diagdata'><input type='text' name='eth1txvalue' size='10'>*64Kbits/s [Range of 0~1526]</td>
            	</tr>
            	<tr>
            		<td class='diagdata'>ETH2 Port TX Bandwidth Value</td>
            		<td class='diagdata'><input type='text' name='eth2txvalue' size='10'>*64Kbits/s [Range of 0~1526]</td>
            	</tr>
            	<tr>
            		<td class='diagdata'>ETH3 Port TX Bandwidth Value</td>
            		<td class='diagdata'><input type='text' name='eth3txvalue' size='10'>*64Kbits/s [Range of 0~1526]</td>
            	</tr>
            	<tr>
            		<td class='diagdata'>ETH4 Port TX Bandwidth Value</td>
            		<td class='diagdata'><input type='text' name='eth4txvalue' size='10'>*64Kbits/s [Range of 0~1526]</td>
            	</tr>
            	<tr>
            		<td class='diagdata'>Cable Port TX Bandwidth Value</td>
            		<td class='diagdata'><input type='text' name='cabletxvalue' size='10'>*64Kbits/s [Range of 0~1526]</td>
            	</tr>                     
        </table>
  </div>
  <h3>Loop Detection</h3>
  <div>
  	<table border=0 cellpadding=0 cellspacing=0>
  		<tr>
  			<td class='diagdata' width=300>Loop Detection Status:</td>
  			<td class='diagdata' width=150>
            			<select name='loopDetectStatus' size=1>
            				<option value='0'>Disable</option>
            				<option value='1'>Enable</option>
            			</select>
            		</td>
  		</tr>
  		<tr>
  			<td class='diagdata'>ETH1 Loop Status:</td>
  			<td class='diagdata'>
  				<select name='eth1LoopStatus' disabled="disabled">
            				<option value='0'>No</option>
            				<option value='1'>Yes</option>
            			</select>
            		</td>
  		</tr>
  		<tr>
  			<td class='diagdata'>ETH2 Loop Status:</td>
  			<td class='diagdata'>
  				<select name='eth2LoopStatus' disabled="disabled">
            				<option value='0'>No</option>
            				<option value='1'>Yes</option>
            			</select>
            		</td>
  		</tr>
  		<tr>
  			<td class='diagdata'>ETH3 Loop Status:</td>
  			<td class='diagdata'>
  				<select name='eth3LoopStatus' disabled="disabled">
            				<option value='0'>No</option>
            				<option value='1'>Yes</option>
            			</select>
            		</td>
  		</tr>
  		<tr>
  			<td class='diagdata'>ETH4 Loop Status:</td>
  			<td class='diagdata'>
  				<select name='eth4LoopStatus' disabled="disabled">
            				<option value='0'>No</option>
            				<option value='1'>Yes</option>
            			</select>
            		</td>
  		</tr>
  	</table>  	
  </div>
</div>
        <p>
        	<input type='button' name='btn_return' class='btn2L' onClick='Return()' value='Return'>
        	<input type='button' name='btn_read' class='btn2L' onClick='Read()' value='Read'>
        	<input type='button' name='btn_write' class='btn2L' onClick='Write()' value='Write'>
        </p> 
         </form>
      </blockquote>
   </body>
</html>
